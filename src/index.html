<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Book Library</title>
        <link href="styles/main.css" rel="stylesheet">
        <script src="js/main.js"></script>
    </head>
    <body>
        <h1>Book Library</h1>
        <div class="">
            <label for="title">Book Title</label>
            <input id="title" type="text" >

            <label for="author">Author</label>
            <input id="author" type="text" >

            <label for="pages">Pages Count</label>
            <input id="pages" type="number" >

            <label for="read">Read this Book </label>
            <input id="read" type="checkbox" >

            <button id="add-book-btn" type="button">Add Book</button>
        </div>

        <div class="books-list">
            <div class="book-list-item">

            </div>
        </div>

        <script>
document.addEventListener('DOMContentLoaded', function(){
    const titleInput = document.querySelector('#title');
    const authorInput = document.querySelector('#author');
    const pagesInput = document.querySelector('#pages');
    const readCheckBox = document.querySelector('#read');
    const addBookButton = document.querySelector('#add-book-btn');
    const booksListDiv = document.querySelector('.books-list');

    function createListItem(book, id) {
        const bookListItem = document.createElement('div');
        bookListItem.className = "book-list-item";

        bookListItem.innerHTML = `<span data-book-id='${id}'>
        ${book.title} by ${book.author},
        ${book.pages} pages</span>`;

        const checkBox = document.createElement("input");
        checkBox.type = "checkbox";
        checkBox.checked = book.read;
        checkBox.dataset.bookId = id;
        bookListItem.appendChild(checkBox);

        bookListItem.insertAdjacentHTML('beforeend', `<button data-book-id='${id}' class="del-btn" type="button">Delete</button>`);

        booksListDiv.appendChild(bookListItem);
    }

    function showBooks() {
        booksListDiv.innerHTML = "";
        myLibrary.forEach((e, i) => {
            createListItem(e, i);
        });
    }

    addBookButton.addEventListener('click', (event) => {
        const book = new Book(titleInput.value,
                              authorInput.value,
                              pagesInput.value,
                              readCheckBox.checked);
                              addBookToLibrary(book);

                              showBooks();

    });

    booksListDiv.addEventListener('click', (event) => {
        if(event.target.classList.contains("del-btn")) {
            event.preventDefault();
            const id = event.target.dataset.bookId;
            console.log("before delete ", id, myLibrary);
            removeBook(id);
            console.log("after delete ", id, myLibrary);
            showBooks();
        } else if(event.target.type === "checkbox") {
            toggleBookReadStatus(event.target.dataset.bookId);
        }
    });

});


        </script>
    </body>
</html>
